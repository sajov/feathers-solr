sudo: required
dist: xenial
language: node_js
jdk:
  - oraclejdk8
node_js: 'node'
before_script:
  - node -v
  - java -version
  - bin/./install-solr.sh
  - npm install -g istanbul
  - npm install --save-dev mocha chai
  - npm install -g coveralls
  - npm install
script:
  - 'if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then bash ./travis/run_on_pull_requests; fi'
  - 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash ./travis/run_on_non_pull_requests; fi'
  - npm run travis
after_success:
  - cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
